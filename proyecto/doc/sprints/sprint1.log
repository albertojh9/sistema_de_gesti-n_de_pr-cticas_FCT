# SPRINT 1 - LOG DE DESARROLLO

**Proyecto:** Sistema de Gesti√≥n de Pr√°cticas FCT  
**Desarrollador:** Alberto Jim√©nez Hern√°ndez  
**Fecha Inicio:** 17/11/2025  
**Fecha Fin:** 17/11/2025  
**Duraci√≥n:** 1 Sprint  

---

## HISTORIAS DE USUARIO IMPLEMENTADAS

### HU-01: Autenticaci√≥n de Usuarios (RF-001)
**Descripci√≥n:** Implementaci√≥n del sistema de login con credenciales √∫nicas  
**Prioridad:** ALTA  
**Estado:** ‚úÖ COMPLETADA

**Tareas Realizadas:**
- [x] Dise√±o de la tabla usuario en la base de datos
- [x] Creaci√≥n del modelo Usuario.php con m√©todos de autenticaci√≥n
- [x] Implementaci√≥n de validaci√≥n de email y contrase√±a
- [x] Desarrollo del controlador auth.php
- [x] Creaci√≥n de la vista de login responsive
- [x] Sistema de gesti√≥n de sesiones PHP
- [x] Implementaci√≥n de redirecci√≥n seg√∫n rol
- [x] Mensajes de error y feedback al usuario
- [x] Sistema de timeout de sesi√≥n (1 hora)

**Criterios de Aceptaci√≥n Cumplidos:**
- ‚úÖ Pantalla de login con campos de email y contrase√±a
- ‚úÖ Validaci√≥n de formato de email
- ‚úÖ Contrase√±a m√≠nima de 8 caracteres
- ‚úÖ Generaci√≥n de sesi√≥n PHP tras login correcto
- ‚úÖ Mensaje 'Credenciales inv√°lidas' si fallan
- ‚úÖ Redirecci√≥n al dashboard seg√∫n rol
- ‚úÖ Enlace "Olvid√© mi contrase√±a" (preparado para futura implementaci√≥n)

**Notas T√©cnicas:**
- Uso de password_verify() para validaci√≥n segura de contrase√±as
- Contrase√±as almacenadas con bcrypt ($2y$10$)
- Sistema de sesiones PHP nativo (en lugar de JWT para simplicidad)
- Control de acceso basado en roles (RBAC)

---

### HU-02: Registro de Ficha de Seguimiento Diaria (RF-003)
**Descripci√≥n:** Permite al estudiante registrar sus actividades diarias en la empresa  
**Prioridad:** ALTA  
**Estado:** ‚úÖ COMPLETADA

**Tareas Realizadas:**
- [x] Dise√±o de tabla ficha_seguimiento en BD
- [x] Creaci√≥n del modelo FichaSeguimiento.php
- [x] Desarrollo de m√©todos crear() y actualizar()
- [x] Controlador estudiante.php con acciones CRUD
- [x] Vista nueva_ficha.php con formulario completo
- [x] Vista editar_ficha.php para modificar fichas pendientes
- [x] Vista ver_ficha.php para visualizar detalles
- [x] Sistema de selecci√≥n de competencias por categor√≠as
- [x] Validaci√≥n de datos en servidor y cliente
- [x] Sistema de valoraci√≥n con estrellas (1-5)
- [x] Contador de caracteres JavaScript
- [x] Restricci√≥n: solo una ficha por fecha

**Criterios de Aceptaci√≥n Cumplidos:**
- ‚úÖ Formulario de 'Nueva Ficha de Seguimiento'
- ‚úÖ Fecha actual por defecto
- ‚úÖ Hora de entrada y hora de salida
- ‚úÖ Campo descripci√≥n (m√≠nimo 50 caracteres)
- ‚úÖ Selector m√∫ltiple de competencias organizadas por categor√≠a
- ‚úÖ Campo opcional de dificultades
- ‚úÖ Valoraci√≥n personal 1-5 estrellas
- ‚úÖ Estado 'Pendiente de validaci√≥n' al guardar
- ‚úÖ El estudiante puede editar hasta que sea validada
- ‚úÖ Ficha de solo lectura una vez validada

**Notas T√©cnicas:**
- C√°lculo autom√°tico de horas_dia mediante columna GENERATED en MySQL
- Validaci√≥n de longitud m√≠nima descripci√≥n (50 caracteres)
- Competencias almacenadas como IDs separados por comas
- Sistema de feedback con mensajes $_SESSION
- Dise√±o responsive mobile-first

---

### HU-03: Validaci√≥n de Fichas de Seguimiento (RF-003)
**Descripci√≥n:** El tutor de empresa puede revisar y validar las fichas de sus estudiantes  
**Prioridad:** ALTA  
**Estado:** ‚úÖ COMPLETADA

**Tareas Realizadas:**
- [x] Desarrollo del controlador tutor.php
- [x] M√©todo obtenerPendientesPorTutor() en modelo
- [x] Vista dashboard.php del tutor
- [x] Vista fichas_pendientes.php con listado
- [x] Vista validar_ficha.php con detalle completo
- [x] Implementaci√≥n de m√©todo validar() en modelo
- [x] Formulario de validaci√≥n con comentarios
- [x] Botones Aprobar/Rechazar con confirmaci√≥n
- [x] Actualizaci√≥n autom√°tica de horas mediante trigger
- [x] Sistema de notificaciones al estudiante (mediante sesi√≥n)
- [x] Control de permisos (tutor solo ve sus estudiantes)

**Criterios de Aceptaci√≥n Cumplidos:**
- ‚úÖ Lista de 'Fichas Pendientes de Validaci√≥n'
- ‚úÖ Muestra estudiante, fecha y resumen
- ‚úÖ Detalle completo al hacer clic
- ‚úÖ Tutor puede a√±adir comentarios
- ‚úÖ Botones 'Aprobar' o 'Rechazar'
- ‚úÖ Si aprueba ‚Üí estado 'Validada'
- ‚úÖ Si rechaza ‚Üí debe indicar motivo (obligatorio)
- ‚úÖ Notificaci√≥n al estudiante (mediante mensajes en sesi√≥n)
- ‚úÖ Horas sumadas al contador total

**Notas T√©cnicas:**
- Trigger MySQL actualiza horas_realizadas en tabla asignacion
- Validaci√≥n JavaScript para comentarios obligatorios en rechazo
- Sistema de badges de colores seg√∫n estado
- Dashboard del tutor muestra resumen de fichas pendientes
- Vista previa de estudiantes asignados con progreso

---

## ARQUITECTURA IMPLEMENTADA

### Base de Datos (MySQL)
```
- usuario (autenticaci√≥n y datos comunes)
- estudiante (perfil estudiante)
- tutor_empresa (perfil tutor)
- coordinador (perfil coordinador - preparado)
- empresa (datos de empresas)
- asignacion (relaci√≥n estudiante-empresa-tutor)
- ficha_seguimiento (fichas diarias)
- competencia (competencias profesionales)
- evaluacion (preparado para futuros sprints)
- incidencia (preparado para futuros sprints)
- mensaje (preparado para futuros sprints)
```

### Backend (PHP)
**Patr√≥n:** MVC (Modelo-Vista-Controlador)

**Modelos:**
- Usuario.php (autenticaci√≥n, gesti√≥n usuarios)
- FichaSeguimiento.php (CRUD fichas)
- Asignacion.php (relaciones estudiante-empresa)
- Competencia.php (gesti√≥n competencias)

**Controladores:**
- auth.php (login, logout, verificaci√≥n)
- estudiante.php (dashboard, fichas CRUD)
- tutor.php (dashboard, validaci√≥n fichas)

**Vistas:**
- auth/login.php
- estudiante/dashboard.php, nueva_ficha.php, ver_ficha.php
- tutor/dashboard.php, validar_ficha.php

### Frontend
- **HTML5:** Estructura sem√°ntica
- **CSS3:** Variables CSS, Grid, Flexbox, dise√±o responsive
- **JavaScript:** Validaci√≥n formularios, interactividad

---

## DATOS DE PRUEBA

### Usuarios Creados
1. **Estudiante:** carlos.martinez@ejemplo.com / password123
2. **Tutor Empresa:** tutor.empresa1@techcorp.com / password123
3. **Coordinador:** coordinador@iescastelar.es / password123

### Datos Iniciales
- 3 estudiantes de DAW 2¬∫
- 2 empresas (TechCorp, InnovaSoft)
- 2 tutores de empresa
- 8 competencias de DAW
- 3 asignaciones activas
- 3 fichas de ejemplo pendientes

---

## TESTING REALIZADO

### Pruebas Funcionales
- [x] Login con credenciales correctas
- [x] Login con credenciales incorrectas
- [x] Validaci√≥n de formato email
- [x] Validaci√≥n longitud contrase√±a
- [x] Redirecci√≥n seg√∫n rol
- [x] Timeout de sesi√≥n
- [x] Crear ficha con datos v√°lidos
- [x] Validaci√≥n descripci√≥n m√≠nimo 50 caracteres
- [x] Selecci√≥n de competencias
- [x] Editar ficha pendiente
- [x] No poder editar ficha validada
- [x] Validar ficha sin comentarios (aprobar)
- [x] Rechazar ficha sin comentarios (error)
- [x] Actualizaci√≥n autom√°tica de horas

### Pruebas de Seguridad
- [x] SQL Injection (protecci√≥n con PDO prepared statements)
- [x] XSS (htmlspecialchars en todas las salidas)
- [x] Control de acceso por roles
- [x] Verificaci√≥n de permisos en acciones
- [x] Sesiones seguras

### Pruebas Responsive
- [x] Mobile (320px-480px)
- [x] Tablet (768px-1024px)
- [x] Desktop (1280px+)

---

## M√âTRICAS DEL SPRINT

**L√≠neas de C√≥digo:**
- PHP: ~2,500 l√≠neas
- SQL: ~350 l√≠neas
- HTML/PHP: ~1,200 l√≠neas
- CSS: ~800 l√≠neas
- JavaScript: ~100 l√≠neas
- **TOTAL:** ~4,950 l√≠neas

**Archivos Creados:**
- Modelos: 4
- Controladores: 3
- Vistas: 7
- SQL: 2
- CSS: 1
- Config: 2
- **TOTAL:** 19 archivos

**Tiempo Estimado:** 8-10 horas de desarrollo

---

## PROBLEMAS ENCONTRADOS Y SOLUCIONES

### Problema 1: C√°lculo autom√°tico de horas
**Descripci√≥n:** Necesidad de calcular autom√°ticamente las horas del d√≠a  
**Soluci√≥n:** Columna GENERATED en MySQL que calcula la diferencia entre entrada y salida

### Problema 2: Actualizaci√≥n de horas totales
**Descripci√≥n:** Mantener sincronizadas las horas realizadas en la asignaci√≥n  
**Soluci√≥n:** Trigger MySQL que actualiza horas_realizadas al validar fichas

### Problema 3: Competencias por categor√≠a
**Descripci√≥n:** Mostrar competencias organizadas en el formulario  
**Soluci√≥n:** M√©todo obtenerPorCategoria() que agrupa competencias

### Problema 4: Validaci√≥n de una ficha por fecha
**Descripci√≥n:** Evitar duplicados de fichas para la misma fecha  
**Soluci√≥n:** Constraint UNIQUE en BD (asignacion_id, fecha)

---

## MEJORAS FUTURAS IDENTIFICADAS

### Para Sprint 2
- [ ] Implementar HU-04: Visualizaci√≥n detallada de estudiantes
- [ ] Implementar HU-05: Control de asistencia y progreso
- [ ] Dashboard con gr√°ficos de progreso
- [ ] Exportaci√≥n de fichas a PDF

### Para Sprint 3
- [ ] HU-06: Sistema de incidencias
- [ ] HU-07: Evaluaci√≥n de competencias
- [ ] Sistema de mensajer√≠a interna
- [ ] Notificaciones por email

### Mejoras T√©cnicas
- [ ] Implementar sistema de logs
- [ ] A√±adir validaci√≥n AJAX en formularios
- [ ] Implementar paginaci√≥n en listados
- [ ] Optimizar consultas SQL con √≠ndices
- [ ] A√±adir cach√© de consultas frecuentes

---

## CONCLUSIONES DEL SPRINT 1

‚úÖ **Objetivos Alcanzados:**
- Sistema de autenticaci√≥n funcional y seguro
- Estudiantes pueden registrar fichas de seguimiento
- Tutores pueden validar fichas de forma intuitiva
- Base de datos robusta y normalizada
- Interfaz responsive y moderna
- C√≥digo limpio y bien estructurado

‚úÖ **Calidad del C√≥digo:**
- Arquitectura MVC implementada correctamente
- Separaci√≥n de responsabilidades
- C√≥digo reutilizable y mantenible
- Comentarios en funciones clave
- Validaci√≥n en cliente y servidor

‚úÖ **Experiencia de Usuario:**
- Interfaz intuitiva y f√°cil de usar
- Mensajes claros de error y √©xito
- Dise√±o responsive mobile-first
- Navegaci√≥n fluida entre secciones

üéØ **Resultado:** Sprint 1 completado exitosamente con las 3 historias de usuario implementadas y funcionando correctamente.

---

**Pr√≥ximo Sprint:** Implementar HU-04, HU-05 y HU-06 (Visualizaci√≥n estudiantes, Control asistencia, Incidencias)

---

_Documento generado el 17/11/2025_
